{
  "scopeName": "source.cscd",
  "name": "CSCD",
  "patterns": [
    { "include": "#format_markers" },
    { "include": "#comments" },
    { "include": "#metadata" },
    { "include": "#collections" },
    { "include": "#primitives" },
    { "include": "#symbols" },
    { "include": "#delimiters"}
  ],
  "repository": {

    "format_markers": {
      "patterns": [
        {
          "name": "cscd.markers.header",
          "match": "~CSCD~"
        },
        {
          "name": "cscd.markers.footer",
          "match": "~/CSCD~"
        }
      ]
    },



    "comments": {
      "patterns": [
        {
          "name": "cscd.comment",
          "begin": ";;",
          "end": ";;"
        }
      ]
    },


    
    "object_member": {
      "patterns": [
        {
          "name": "cscd.object.member",
          "match": "\\b[A-Za-z_][A-Za-z0-9_]*\\b(?=\\s*:)"
        }
      ]
    },
    
    "metadata": {
      "patterns": [
        {
          "name": "cscd.metadata.address",
          "begin": "`",
          "end": "`"
        },
        {
          "name": "cscd.metadata.type",
          "begin": "\\(",
          "end": "\\)"
        },
        {
          "name": "cscd.metadata.scope",
          "begin": "\\^",
          "end": "\\^"
        },
        {
          "name": "cscd.metadata.offset",
          "begin": "\\|",
          "end": "\\|"
        }
      ]
    },



    "collections": {
      "patterns": [
        {
          "name": "cscd.collections.list",
          "begin": "\\[",
          "end": "\\]",
          "patterns": [
            { "include": "#format_markers" },
            { "include": "#comments" },
            { "include": "#metadata" },
            { "include": "#primitives" },
            { "include": "#collections" },
            { "include": "#delimiters" }
          ]
        },
        {
          "name": "cscd.collections.dictionary",
          "begin": "\\{",
          "end": "\\}",
          "patterns": [
            { "include": "#format_markers" },
            { "include": "#comments" },
            { "include": "#metadata" },
            { "include": "#primitives" },
            { "include": "#collections" },
            { "include": "#delimiters" }
          ]
        },
        {
          "name": "cscd.collections.object",
          "begin": "\\<",
          "end": "\\>",
          "patterns": [
            { "include": "#format_markers" },
            { "include": "#comments" },
            { "include": "#metadata" },
            { "include": "#primitives" },
            { "include": "#collections" },
            { "include": "#delimiters" }
          ]
        }
      ]
    },



    "primitives": {
      "patterns": [
        {
          "name": "cscd.primitives.string",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "cscd.escapes.string",
              "match": "\\\\(t|n|r|\"|'|\\\\|\\(|\\)|\\*|\\^|&|`|[0-9A-F]+;)"
            }
          ]
        },
        {
          "name": "cscd.primitives.character",
          "match": "'''"
        },
        {
          "name": "cscd.primitives.character",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "cscd.escapes.character",
              "match": "\\\\(t|n|r|'|\\\\|[0-9A-F]+;)"
            }
          ]
        },
        
        {
          "name": "cscd.primitives.decimal",
          "match": "-?\\$\\d*(\\.\\d*)?"
        },
        {
          "name": "cscd.primitives.float",
          "match": "-?(?:\\d+(?:\\.\\d*)?[eE]-?\\d+|\\.\\d+|\\d+\\.\\d*|\\.|-\\.)"
        },
        {
          "name": "cscd.primitives.integer",
          "match": "-?\\b\\d+\\b"
        },
        
        {
          "name": "cscd.primitives.null",
          "match": "\\bnull\\b"
        },
        {
          "name": "cscd.primitives.boolean",
          "match": "\\b(true|false)\\b"
        },
        {
          "name": "cscd.primitives.nan",
          "match": "\\bnan\\b"
        },
        {
          "name": "cscd.primitives.infinity",
          "match": "-?\\binf\\b"
        },
        
        {
          "name": "cscd.primitives.color",
          "match": "#[0-9A-F]{0,8}"
        },

        {
          "name": "cscd.primitives.uid",
          "match": "%[0-9a-fA-F-]*"
        },


        {
          "name": "cscd.primitives.timestamp",
          "begin": "@",
          "end": "@"
        },

        {
          "name": "cscd.primitives.duration",
          "match": "-?(?:\\d+d|\\d+h|\\d+m|\\d+(?:\\.\\d+)?s)"
        },

        {
          "name": "cscd.primitives.bytes",
          "match": "![A-Za-z0-9+/=]*"
        },


        {
          "name": "cscd.primitives.reference",
          "begin": "&",
          "end": "&"
        },


        {
          "name": "cscd.primitives.symbol",
          "begin": "\\*",
          "end": "\\*"
        },
        {
          "name": "cscd.primitives.symbol",
          "match": "\\b[A-Za-z_][A-Za-z0-9_]*\\b"
        }
      ]
    },



    "delimiters": {
      "patterns": [
        {
          "name": "cscd.punctuation",
          "match": "\\["
        },
        {
          "name": "cscd.punctuation",
          "match": "\\]"
        },
        {
          "name": "cscd.punctuation",
          "match": "\\{"
        },
        {
          "name": "cscd.punctuation",
          "match": "\\}"
        },
        {
          "name": "cscd.punctuation",
          "match": "\\<"
        },
        {
          "name": "cscd.punctuation",
          "match": "\\>"
        },
        {
          "name": "cscd.punctuation",
          "match": ","
        },
        {
          "name": "cscd.punctuation",
          "match": ":"
        }
      ]
    }
  }
}