{
  "scopeName": "source.cscd",
  "name": "CSCD",
  "patterns": [
    { "include": "#format_markers" },
    { "include": "#comments" },
    { "include": "#metadata" },
    { "include": "#collections" },
    { "include": "#primitives" },
    { "include": "#symbols" },
    { "include": "#delimiters"}
  ],
  "repository": {

    "format_markers": {
      "patterns": [
        {
          "name": "keyword.other.header.cscd",
          "match": "~CSCD~"
        },
        {
          "name": "keyword.other.footer.cscd",
          "match": "~/CSCD~"
        }
      ]
    },

    "comments": {
      "patterns": [
        {
          "name": "comment.block.cscd",
          "begin": ";;",
          "end": ";;"
        }
      ]
    },

    "metadata": {
      "patterns": [
        {
          "name": "variable.other.address.cscd",
          "begin": "`",
          "end": "`"
        },
        {
          "name": "storage.type.annotation.cscd",
          "begin": "\\(",
          "end": "\\)"
        },
        {
          "name": "variable.other.scope.cscd",
          "begin": "\\^",
          "end": "\\^"
        },
        {
          "name": "constant.numeric.offset.cscd",
          "begin": "\\|",
          "end": "\\|"
        }
      ]
    },

    "collections": {
      "patterns": [
        {
          "name": "meta.list.cscd",
          "begin": "\\[",
          "end": "\\]",
          "patterns": [
            { "include": "#format_markers" },
            { "include": "#comments" },
            { "include": "#metadata" },
            { "include": "#primitives" },
            { "include": "#collections" },
            { "include": "#delimiters" }
          ]
        },
        {
          "name": "meta.dictionary.cscd",
          "begin": "\\{",
          "end": "\\}",
          "patterns": [
            { "include": "#format_markers" },
            { "include": "#comments" },
            { "include": "#metadata" },
            { "include": "#primitives" },
            { "include": "#collections" },
            { "include": "#delimiters" }
          ]
        },
        {
          "name": "meta.object.cscd",
          "begin": "\\<",
          "end": "\\>",
          "patterns": [
            { "include": "#format_markers" },
            { "include": "#comments" },
            { "include": "#metadata" },
            { "include": "#primitives" },
            { "include": "#collections" },
            { "include": "#delimiters" }
          ]
        }
      ]
    },

    "primitives": {
      "patterns": [
        {
          "name": "string.quoted.double.cscd",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.cscd",
              "match": "\\\\(t|n|r|\"|'|\\\\|\\(|\\)|\\*|\\^|&|`|[0-9A-F]+;)"
            }
          ]
        },
        {
          "name": "string.quoted.single.cscd",
          "match": "'''"
        },
        {
          "name": "string.quoted.single.cscd",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.cscd",
              "match": "\\\\(t|n|r|'|\\\\|[0-9A-F]+;)"
            }
          ]
        },
        
        {
          "name": "constant.numeric.decimal.cscd",
          "match": "-?\\$\\d*(\\.\\d*)?"
        },
        {
          "name": "constant.numeric.float.cscd",
          "match": "-?(\\d+\\.\\d*|\\.\\d+|\\d+\\.?)(e-?\\d+)?"
        },
        {
          "name": "constant.numeric.integer.cscd",
          "match": "-?\\b\\d+\\b"
        },
        
        {
          "name": "constant.language.null.cscd",
          "match": "\\bnull\\b"
        },
        {
          "name": "constant.language.boolean.cscd",
          "match": "\\b(true|false)\\b"
        },
        {
          "name": "constant.language.nan.cscd",
          "match": "\\bnan\\b"
        },
        {
          "name": "constant.language.infinity.cscd",
          "match": "-?\\binf\\b"
        },
        
        {
          "name": "constant.numeric.color.cscd",
          "match": "#[0-9A-F]{0,8}"
        },

        {
          "name": "constant.numeric.uid.cscd",
          "match": "%[0-9a-fA-F-]*"
        },


        {
          "name": "constant.numeric.timestamp.cscd",
          "begin": "@",
          "end": "@"
        },

        {
          "name": "constant.numeric.duration.cscd",
          "match": "-?(?:\\d+d|\\d+h|\\d+m|\\d+(?:\\.\\d+)?s)"
        },

        {
          "name": "constant.numeric.bytes.cscd",
          "match": "![A-Za-z0-9+/=]*"
        },


        {
          "name": "constant.character.reference.cscd",
          "begin": "&",
          "end": "&"
        },


        {
          "name": "string.quoted.symbol.delimited.cscd",
          "begin": "\\*",
          "end": "\\*"
        },
        {
          "name": "variable.other.symbol.bare.cscd",
          "match": "\\b[A-Za-z_][A-Za-z0-9_]*\\b"
        }
      ]
    },



    "delimiters": {
      "patterns": [
        {
          "name": "punctuation.separator.comma.cscd",
          "match": ","
        },
        {
          "name": "punctuation.separator.colon.cscd",
          "match": ":"
        }
      ]
    }
  }
}